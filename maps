

generateMap function returns 'map' terms

Each 'map' term is a function.
They are all unique
Each 'map' term has some state: a hashtable
Calling 'trainingFunction' on any map term gives the same result <-

Solution: add a function trainingForCalls, which returns a training function
appropriate for terms that use the given term as their function.
