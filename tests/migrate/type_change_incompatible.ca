
def left()
  state bool a = true

def right()
  state String a = 'new'
  print('after migration, a is: ' a)

int = make_stack(left)
int.run

int.migrate_to(right)
int.run

assert(int.top.block == right.block)
