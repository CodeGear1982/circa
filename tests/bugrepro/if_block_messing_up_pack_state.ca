
-- This repros a bug where the if_block call was messing up the position of the
-- final 'pack_state' call.
-- (Update 9/2013: Disregard above comment, pack_state was factored out)

def main()
  state a = 1

  if true
      a = 2

  state b = 3

int = make_stack(main)
int.run
print(int.extract_state)
