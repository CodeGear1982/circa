
-- Case 1: Save a closure as state, without .freeze.

def case1(i)
  print('called case1 with: ' i)
  def closure()
    print('called case1 closure with: ' i)

  state c = closure
  c.call

int = case1.to_stack
int.call('run1')
int.call('run2')

def case2(i)
  print('called case2 with: ' i)
  def closure()
    print('called case2 closure with: ' i)

  state c = closure.freeze
  c.call

int = case2.to_stack
int.call('run1')
int.call('run2')
