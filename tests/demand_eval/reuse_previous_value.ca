
def main()
  def get_a() -> String
    print('called get_a')
    'a'

  def get_b(i) -> String
    print('called get_b')
    concat(i ' b')

  def get_c(i) -> String
    print('called get_c')
    concat(i ' c')

  a = get_a()
  b = get_b(a)
  c = get_c(a)

stack = make_stack({})

print('Evaluating b:')

print('b = ', stack.eval_on_demand(main.block.find_term('b')))

print("Evaluating c: (this should't call get_a)")
print('c = ', stack.eval_on_demand(main.block.find_term('c')))
