
require iter

-- flatten & to_iterator
for example in [ [] [1] [1 2 3] [[1] [2] [3]] ]
  assert(iter.flatten(iter.to_iterator(example)) == example)

-- concat
assert(iter.flatten(iter.concat([1] [2 3 4])) == [1 2 3 4])
assert(iter.flatten(iter.concat([1] iter.concat([2] [3 4]))) == [1 2 3 4])
assert(iter.flatten(iter.concat([1] [])) == [1])
assert(iter.flatten(iter.concat([] [])) == [])
assert(iter.flatten(iter.concat([1] [])) == [1])

-- visit
iter.visit(iter.concat([1 2] [3 4]), (n) ->
  print('visited: ' n)
)
