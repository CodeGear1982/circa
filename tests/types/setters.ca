
struct T {
  int a
  String b
}

t = T.make(1, 'x')
assert(to_string(t) == "{a: 1, b: 'x'}")

@t.set_a(4)
assert(to_string(t) == "{a: 4, b: 'x'}")

@t.set_a(5).set_b('y')
assert(to_string(t) == "{a: 5, b: 'y'}")

def error_test(t)
  t.set_a('hi')

int = make_stack(error_test)
int.call(t)
assert(int.errored)
