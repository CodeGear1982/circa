

type MyType {
  int a,
  int b,
  string name,
  number distance
}

-- Create an instance and assign fields
m = create(MyType)
m.name = "Andy"
m.a = 1
m.b = m.a + 2
assert(m.name == "Andy")
assert(m.a == 1)
assert(m.b == 3)
assert(to_string(m) == "[1, 3, 'Andy', 0.0]")

-- test += on a field
m.a += 5
assert(m.a == 6)
assert(to_string(m) == "[6, 3, 'Andy', 0.0]")

-- Cast from a plain list
type MyType2 {
    string a
    string b
    int c
}

plain_list = ['hello' 'there' 3]
mt2 = plain_list -> MyType2
assert(mt2.a == 'hello')
assert(mt2.b == 'there')
assert(mt2.c == 3)

-- Composite type
type Composite {
  MyType myClass,
  MyType myClass2,
  string name,
}
c = create(Composite)
assert(to_string(c) == "[[0, 0, '', 0.0], [0, 0, '', 0.0], '']")

type Vector { number x, number y }
v = Vector()

v.x = 5.0
v.y = 6.0

assert(to_string(v) == '[5.0, 6.0]')
assert(v.x == 5.0)
assert(v.y == 6.0)
