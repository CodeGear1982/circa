
def test(old, new)
  patch = compute_patch(old, new)
  print("delta(" old ", " new ") = " patch)
  result = apply_patch(old, patch)
  assert(result == new)

test(1 1)
test(1 2)
test([1] [1])
test([1] [1 2])
test([1 2] [1 2])
test([1 2] [1])
test([] [1 2 3])
test([1 2 3] [])
test(true false)
test(1 false)
test("a" "b")
test(1 1.0)
test(1.0 1)

test(Table.make.set("a","b"), Table.make.set("a","b"))
test(Table.make.set("a","b"), Table.make.set("a","c"))
test(Table.make.set("a","b"), Table.make)
test(Table.make, Table.make.set("a","b"))
